%%%%%%%%%%%%%%%%%%%%%
%   AMS packages    %
%%%%%%%%%%%%%%%%%%%%%
\documentclass{amsart}
\usepackage{amsmath}
\usepackage{amsxtra}
\usepackage{amscd}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{eucal}
\usepackage[all]{xy}
\usepackage{graphicx}
\usepackage{comment}
\usepackage{amssymb}

\newtheorem{cor}[subsubsection]{Corollary}
\newtheorem{lem}[subsubsection]{Lemma}
\newtheorem{prop}[subsubsection]{Proposition}
\newtheorem{propconstr}{Proposition-Construction}
\newtheorem{ax}{Axiom}
\newtheorem{conj}{Conjecture}
\newtheorem{thm}[subsubsection]{Theorem}
\newtheorem{defn}[subsubsection]{Definition}
\newtheorem{rem}[subsubsection]{Remark}
\newtheorem{eg}[subsubsection]{Example}
\newtheorem{ex}[subsubsection]{Exercise}
\newtheorem{note}[subsubsection]{Notation}
\newtheorem{alg}[subsubsection]{Algorithm}
\newtheorem{fact}[subsubsection]{Fact}

\newcommand\nc{\newcommand}
\nc\on{\operatorname}
\nc\renc{\renewcommand}
\newcommand\ssec{\subsection}
\newcommand\sssec{\subsubsection}
\newcommand\bO{{\mathbf O}}
\newcommand\CC{{\mathcal C}}
\newcommand\BN{{\mathbb N}}
\newcommand\BC{{\mathbb C}}
\newcommand\BF{{\mathbb F}}
\newcommand\BR{{\mathbb R}}
\newcommand\BQ{{\mathbb Q}}
\newcommand\BBZ{{\mathbb Z}}
\newcommand\uR{\underline{R}}
\newcommand\uZ{\underline{\BBZ}}
\newcommand\CF{{\mathcal F}}
\newcommand\uCF{\underline{{\mathcal F}}}
\newcommand\BZ{{\mathbb Z}}
\newcommand\BA{{\mathbb A}}
\newcommand\BP{{\mathbb P}}
\newcommand\fa{{\mathfrak a}}
\newcommand\fp{{\mathfrak p}}
\newcommand\fq{{\mathfrak q}}
\newcommand\fm{{\mathfrak m}}
\newcommand\pt{\mathrm{pt}}
\nc{\bd}{\mathbf{d}}
\nc{\Hom}{\on{Hom}}
\nc{\End}{\on{End}}
\nc{\Spec}{\on{Spec}}
\nc{\Reg}{\on{Reg}}
\nc{\Specm}{\on{Specm}}
\nc\ol{\overline}
\nc\wt{\widetilde}
\nc{\one}{{\mathbf{1}}}
\renc{\mod}{\on{-mod}}
\newcommand{\id}{\mathrm{id}}
\nc{\ul}{\underline}
\nc{\uHom}{\ul\Hom}
\nc{\tHom}{\ul\uHom}
\nc{\wh}{\widehat}
\nc{\Vect}{\on{Vect}}
\nc{\Res}{\on{Res}}
\nc{\Ind}{\on{Ind}}

\title{Unimodality Ideas}
\author{Aaron Landesman}
\usepackage{amsmath}
\begin{document}

\maketitle
\section{Directions to move}
\begin{enumerate}
	\item Look at generalising $p_i^r$ for general r.
	\item Generalizing to $q$ analog of cyclic group.
	\item Try relating $p_i,q_i.$
	\item Coding which groups $G$ we have $p_i=q_i.$
	\item When are $p_i = q_i.$
	\item Try to compute $q_i.$
	\item Look at simple groups, and maybe solvable groups, try quotienting by normal subgroups?
	\item Are there any ways to combine $G_1,G_2$ where $G_i$ are groups with $p_i = q_i.$
	\item Are there some characterisations of groups with $q_i,p_i.$
	\item How to use sage, what can we do with groups?
\end{enumerate}
\section{Cyclic group edges, this section is wrong.}
\begin{rem}
All subscripts will be taken $\pmod n.$
\end{rem}


\begin{thm}
The statistic $p_i$ as Zijian defined are unimodal for the necklace poset.
\end{thm}
\begin{proof}

\end{proof}

\begin{lem}
\label{q_i_count}
$q_i = \binom {n-1}{i-1}.$
\end{lem}
\begin{proof}

\end{proof}

\begin{lem}
The difference $p_i - q_i$ is the number of pairs $(x,y),x \lessdot y,$ such that there exists $\sigma$ so that $\sigma x \lessdot y,$ but there does not exist $g$ with $gx =\sigma x,gy = y.$ 
\end{lem}
\begin{proof}

\end{proof}

\begin{defn}
We call $(x,y)$ a special pair if there exists $\sigma$ so that $\sigma x \lessdot y,$ but there does not exist $g$ with $gx =\sigma x,gy = y.$
\end{defn}

\begin{lem}
$p_i - q_i$ is the number of orbits of special pairs
\end{lem}
\begin{proof}

\end{proof}

\begin{rem}
We are restricting to the cyclic group $C_n,$ and so we are assuming that all elements are generated by the permutation $c =(1 2 \cdots n).$ We now wish to bound the number of orbits of special pairs.
\end{rem}

\begin{rem}
\label{proper_ordering}
To compute the number of orbits of special pairs, we can always assume $x = \{t_1,t_2,\ldots, t_{i-1}\}_<$ and $y = \{t_1,t_2,\ldots, t_i\}_<$ by simply composing with an element of $C_n$ in order to make the missing $t_i$ the biggest element of the set. We may as well assume $t_1 = 1.$
\end{rem}



\begin{lem}
\label{max_shift_one}
Suppose $(x,y)$ is a special pair, as in ~\ref{proper_ordering} with $\sigma x \lessdot y$ Then, $\sigma$ is the permutation sending $t_1$ to $t_2$ or $t_1$ to $t_{i}.$
\end{lem}
\begin{proof}
Suppose otherwise, that it sent $t_1$ to $t_k$ for $k \neq 2,i.$ Then, since the relative ordering of the elements are preserved, we must have $t_l$ is sent to $t_{l+k-1}.$ Since we can only act by elements of $C_n,$ this gives us that the values $t_{l+1}-t_l= t_{k+l}-t_{k+l-1}.$ for all $l \in [i].$ However, this means that $\sigma y = y,$ (THAT IS THE TRICKIEST PART TO SEE) so $x,y$ is not a special pair.
\end{proof}

\begin{lem}
Any special pair $(x,y)$ must have $y = \{t_1,t_1+a,t_1 + 2a,\cdots,t_1+(i-1)a\}$ for some $a < n.$
\end{lem}
\begin{proof}
By ~\ref{max_shift_one} we must have that $\sigma$ sends $t_1$ to $t_2$ or $t_i.$ Let's assume it sends $t_1$ to $t_2,$ the other case is similar. However, this means we must send $t_l$ to $t_{l+1},$ which means $t_l - t_{l-1} = t_{l+1} - t_l,$ which means that $y$ is of the claimed form.
\end{proof}



\begin{lem}
\label{bound_special_orbits}
The number of orbits of special pairs is between $n-1$ and $\frac{n}{2}-1.$
\end{lem}
\begin{proof}
By the above, there are at most $n$ orbits (as determined by the value of a) which can have special pairs. However, it is clear that $a = i$ and $a = n-i$ lie in the same orbit. Therefore, we have $\frac{n}{2}$ identifications, which tells us $p_i - q_i \geq \frac{n}{2}-1.$
On the other hand, in the worst possible case, we have all $n$ orbits are equivalent, which implies $p_i - q_i \leq n.$
\end{proof}

\begin{lem}
The $p_i$ statistics are unimodal.
\end{lem}
\begin{proof}
By ~\ref{q_i_count} we know the differences of the $q_i$ on the nose it is obvious that $q_i - q_{i-1}\geq \frac{n}{2}.$ However, by ~\ref{bound_special_orbits} we have $n-1 \geq (q_i - p_i) \geq \frac{n}{2}-1.$ Therefore, $p_i - p_{i-1} \geq \frac{n}{2}-\frac{n}{2} \geq 0.$
\end{proof}

\section{Ideas from Monday June 30}

Let $S_{x,y} = \{\sigma|\sigma x\lessdot y\}.$
I think $q_i = \sum_{G(x,y)}^{} \frac{|S_{x,y}|}{|Stab(x)\cup Stab(y)|}$

Now, let us think of $\sigma$ as a representative of $S_{x,y}/(Stab_x \cup Stab_y)$
Note, the condition that $\sigma$ does not stabilize $x$ means we need the all the verticies of $y$ to be present in $x \cup \sigma x.$

Possible idea, we might still have to always send $i_1 \mapsto i_n$? Not so sure about how to make this precise though.

\begin{lem}
$Stab(x) \neq e \implies Stab(y) = e,$ and $Stab(x) \neq e \implies Stab(y) = e,$ 
\end{lem}
\begin{proof}
If $c^k \in Stab(x),c^k \neq e,$ where $c$ is the cyclic generator, and $k$ is minimal. We know that every elements in $x$ spaced every $k$ apart. So, we can treat it as a necklace of length $k.$ We just have to show that after adding a single bead it cannot have any symmetries. However, if we could do this in a relatively prime fashion, we would obtain many additional equalities between differences of places in $x,$ and we could not change just one of those differences due to cyclic symmetry of order 
$k,$ since we would not get an equality in one of the $n/k$ parts, but we would get the equality in all the others. 
\end{proof}



\begin{lem}
In order for $|\frac{|S_{x,y}|}{|Stab(x)\cup Stab(y)|}|>1,$ we must have $Stab(x)\cup Stab(y) = e.$
\end{lem}
\begin{proof}
This is similar to the previous lemma, in either case, we get equalities between differences of the one with a stabilizer, which end up contradicting the one additional point.
\end{proof}
\begin{lem}
In order to have $|\frac{|S_{x,y}|}{|Stab(x)\cup Stab(y)|}|>1,$ $x$ must be of the form of a cyclic element union 1 dude, and $y$ must be of the form of the cyclic element union 2 dudes, and the rotation must take $x$ to $y.$
\end{lem}
\begin{proof}

\end{proof}

\begin{lem}
Now we just need to count the number of cyclic generator dudes. Clearly at most n, since the number of divisors are less than n. Therefore, since each contributes at most n, we only have to bound successive differences of binomial coefficients by $n^2.$
\end{lem}
\begin{proof}
For each prime divisor, we can obtain one such cyclic generator dude.
First, there are the ones which all have the same difference, these seem to be most common. There are exactly n/2-1 of these? The other counts will depend on the orbit sizes.
\end{proof}

\section{Proof of cyclic group edge numbers is Unimodal}

\begin{lem}
\label{orbit_differences}
The number $q_i - p_i$ is in bijection with the number of orbits with representative $y$ satisfying the following properties.
\begin{enumerate}
	\item There is some $k | n,$ possibly with $k = n,$ such that there are $\lfloor \frac{i}{k} \rfloor$ distinct sets of the form $\{a+k,\ldots,a+nk\},$ taken $\pmod n$
	\item The remaining  $s = i-\lfloor \frac{i}{k} \rfloor,$ with $s \neq 1,s \neq k.$ elements all have the same value $\pmod \frac{n}{k}$ and there exists $a \in [n]$ and $r < \frac{n}{2}$ such that the remaining elements all lie in the set $\{a+r,a+2r,\ldots, a+sr\}.$
\end{enumerate} 
\end{lem}
\begin{proof}
Split by the cases of $k = n,$ in which case we have a full cycle, and this is clearly the only possibility, or otherwise $k \neq n,$ in which case some set of elements must be fixed, and then we will have such a ``tail cycle'' as in the second property
\end{proof}

\begin{defn}
We call the non full cycle, as described in the second property a tail cycle.
\end{defn}

\begin{rem}
The goal of this section is to bound $q_{i-1} <p_i \leq q_i.$ Note we trivially know $p_i \leq q_i,$ Additionally, this bound will trivially show the $p_i$ are unimodal (they are obviously symmetric by taking complements.) Therefore, to accomplish our goal, it suffices to show $q_i - p_i > q_i - q_{i-1} = \binom {n-2}{i-1},$ since we know $q_i = \binom {n-i}{i-1}.$
\end{rem}

\begin{note}
Denote the number of edges from $(B_n/G)_i$ to $(B_n/G)_{i-1}$ by $p(n,i).$ Similarly, define $q(n,i)$ as the $q_i$ for $B_n.$
\end{note}

\begin{lem}
\begin{align*}
	p_i \leq \sum_{k = \frac{n}{p},p|k,p \text{ prime }}^{}p(k,\lceil \frac{i}{k}\rceil) \lfloor \frac{p}{2}\rfloor
\end{align*}
\end{lem}
\begin{proof}
Note that by ~\ref{orbit_differences}, we only have to count the number of G-orbits satisfying the condition of ~\ref{orbit_differences}. Clearly, for every $t|n,$ we can write $t$ as a factor of some $k = \frac{n}{p}.$ Therefore, for any cycle size $t$, it can be decomposed as a disjoint union of $\frac{k}{t}$ cycles of size $k.$ Therefore, summing the number of equivalence classes corresponding to elements of $p_i - q_i,$ overcounts the number of equivalence classes.

Now, I claim the number of equivalence classes composed of cycles of length $k$ is $p(k,\lceil \frac{i}{k}\rceil) \lfloor \frac{k}{2}\rfloor.$ To see this, we describe a simple bijection. We know that the tail cycle has between $2$ and $k-1$ elements. Now, restrict to only the first $k$ elements of the cycle. Each representative has a set of $\lfloor \frac{i}{k}\rfloor$ full cycles, and $1$ partial cycle. For each such element, we correspond all $\lceil \frac{i}{k}\rceil$ to an element $y_k \in B_k,$ and the elements of $\lfloor \frac{i}{k}\rfloor$ with an element $x_k$ of $B_k.$ Clearly $x \lessdot y.$ This uniquely characterizes the locations of the full cycles $\pmod k,$ and the location of the partial cycle. Hence, there are $p(k,\lceil \frac{i}{k}\rceil)$. The reason we have to add in a factor of $ \lfloor \frac{p}{2}\rfloor$ is simply to tell us the difference between two adjacent element of the cycle in $x_k.$ It can be any multples of $k$ from $k$ to $k \cdot p,$ but of course a difference of $k \cdot i$ is equivalent to $k \cdot p-i$, and these are the only two equivalent cycles. Hence, this proves the bound. 
\end{proof}

\begin{thm}
We can bound $p_i \leq q_i - q_{i-1}$
\end{thm}
\begin{proof}
Using the above relation, we can bound $p_i \leq \sum_{k = \frac{n}{p},p|k,p \text{ prime }}^{}p(k,\lceil \frac{i}{k}\rceil) \lfloor \frac{p}{2}\rfloor.$
We know $p(n,i) \leq q(n,i),$ and so using this bound, we have $p_i \leq \sum_{k = \frac{n}{p},p|k,p \text{ prime }}^{}q(k,\lceil \frac{i}{k}\rceil) \lfloor \frac{p}{2}\rfloor,$ and then since we know $q(k,\lceil \frac{i}{k}\rceil) = \binom {k-1} {\lceil \frac{i}{k}\rceil-1},$ we can write $p_i \leq \sum_{k = \frac{n}{p},p|k,p \text{ prime }}^{}\binom {k-1} {\lceil \frac{i}{k}\rceil-1}\lfloor \frac{p}{2}\rfloor.$ Now, there are clearly at most $\log n$ terms in this sum, since there are fewer than $\log n$ distinct prime factors of $n.$ And therefore, for all $k | n,k>3$, we just have to bound $\log n \cdot \binom {k-1} {\lceil \frac{i}{k}\rceil-1}\lfloor \frac{p}{2}\rfloor \cdot \log n < \binom {n-2}{i-1},$ which is quite obvious, at least for $n >5$ or so.
\end{proof}

\section{Cyclic group with r > 1}

\begin{note}
Let me define statistics $p(i,r,n)$ which will denote the number of pairs $(x,y) \in B_n \times B_n$ such that $|x| = i-r,|y| = i,x<y$ up to the equivalence relation that $(x,y) \equiv (z,w)$ if there is some $\sigma,\tau$ such that $\sigma x = z,\sigma y = w.$
\end{note}

\begin{conj}
The above case of $r =1$ can be generalized asymptotically as $n \rightarrow \infty$ for $r$ fixed. Obviously, it will fail in small cases, even if $r = 2$ or $3.$
\end{conj}

\section{When are quotients of prime order necklace posets peck?}

I think Stanley's proof of quotients of unitary peck posets being peck uses something a little weaker. That is, I think he only uses that we need the constants $c_y = c_{wy}$ for all $w \in G,y \in P_i.$ However, for necklace posets, we know that $c_y$ is always either 1 or 2. So, quotienting by group actions which send the 1's to 1's and 2's to 2's will still leave us with a Peck poset.

In the prime case, for example, we always have the 2's coming from evenly spaced chains. So for any group action sending non evenly spaced chains to evenly spaced chains, and non evenly spaced sequences to non evenly spaced sequences, the quotient should be Peck. 

\section{All abelian subgroups}

For $A$ an abelian subgroup action on $[n],$ we can decompose it into orbits. Now, let's just try to understand the action on a single orbit. By assumption, this is transitive, and it must also act simply, as otherwise the action has a stabilizer (due to A being abelian). So, now we have a simply transitive action of an abelian subgroup on $[k].$ But then we know exactly that after quotienting by the stabilizer, we have $|A|/Stab([k])=k$ acting on $[k]$, so we can view $k$ as a cube corresponding to $A,$ so we have $A$ acting on $A$ in the natural way of the cube $A.$

\section{Reducing to Transitive Actions}

Think about the size of the stabilizer.

Maybe we can restrict to transitive group action, since nontransitive actions can either be ignored, or have too much redundant information.

\begin{rem}
Here is an interesting equality
\begin{align*}
	\sum_{Gx \lessdot Gy}^{}\frac{|\{g|gx \lessdot y\}|}{|Stab(x)|}=\sum_{G(x\lessdot y)}^{}1
\end{align*}
\end{rem}

\begin{thm}
Suppose $B_n/G$ has orbits $O_1,\ldots, O_k$ on $[n].$ If the edge counting posets given by restricting the $G$ action to each orbit $O_i$ are symmetric unimodal. Then, $B_n/G$ is symmetric unimodal.
\end{thm}
\begin{proof}
We shall prove this using several following claims. Basically, let's just assume there are 2 orbits.
\end{proof}

\begin{cor}
If we would like to show that the edge sequences are always unimodal. We can restrict to considering transitive group actions. In particular, we may assume $|O/X| = 1,$ and hence $\sum_{g\in G}^{}|X^g| = |G|.$
\end{cor}
\begin{proof}

\end{proof}

\begin{cor}
All abelian groups have symmetric, unimodal sequences.
\end{cor}
\begin{proof}
By the theorem, it suffices to show this is true for transitive abelian groups. It's not too hard to see than transitive faithful abelian group actions are actually simply transitive. Then, we can actually describe all abelian group actions $A$ on $[n]$ as $A \times A \rightarrow A,$ if we identify $[n]$ with $A$ as a set. But then, using this identificaiton, we may use the same arguement of computing the $q_i$ and bounding the difference of the $p_i$ from the $q_i$ to explicitly show the sequence is unimodal.
\end{proof}

\begin{prop}
Let the orbits be $O_1,O_2$ and let the corresponding unimodal, symmetric edge counting posets be $P,Q.$ In order to show $B_n/G$ is symmetric unimodal, it suffices to show there are more edges eminating from $P_{i+1} \times Q_j$ than from $P_i \times Q_j,$ with $i < rk(P)/2.$
\end{prop}
\begin{proof}
Clearly, if $i+j < n/2,$ we must have either $i < rk(P)/2$ or $j<rk(Q)/2.$ So, just assume $i < rk(P)/2.$ Then, each level of the poset $B_n/G$ is made of a union of elements of the form $P_t \times Q_s$ with $t + s = i+j.$ Again, always one of $t,s$ must be less than $rk(P)/2$ or $rk(Q)/2,$ so if it is $t$ use the assumption to show there are more edges leaving $P_{t+1} \times Q_s$ than $P_t \times Q_s.$ Essentially, we are just creating a trivial order matching here.
\end{proof}

\begin{prop}
In order to show  there are more edges eminating from $P_{i+1} \times Q_j$ than from $P_i \times Q_j,$ with $i < rk(P)/2,$ it suffices to show there are more edges from $P_{i+1} \times Q_j$ to $P_{i+2} \times Q_j$ than there are from $P_i \times Q_j$ to $P_{i+1} \times Q_j,$ and that there are more edges from $P_{i+1} \times Q_j$ to $P_{i+1} \times Q_{j+1}$ then there are from $P_i \times Q_j$ to $P_i \times Q_{j+1}.$
\end{prop}
\begin{proof}
All the edges leaving $P_t \times Q_s$ must either go to $P_{t+1} \times Q_s$ or $P_t \times Q_{s+1},$ and if we assume both of these are dominated by the edges one level higher, then we obtain unimodality.
\end{proof}

\begin{prop}
there are more edges from $P_{i+1} \times Q_j$ to $P_{i+2} \times Q_j$ than there are from $P_i \times Q_j$ to $P_{i+1} \times Q_j.$
\end{prop}
\begin{proof}
The number of edges from $A$ to $B$ is just the number of pairs $(Ga,Gb) \in A \times B$ with $Ga \lessdot Gb.$ By the unimodality assumption on $P_i,$ taking $A = P_i,B= P_{i+1},C = P_{i+2},$ there are more edges from $A$ to $B$ than from $B$ to $C$, which means there are fewer pairs $Ga \lessdot Gb$ than there are $Gb \lessdot Gc$. Then, note that for any fixed $y \in Q_j,$ the orbit $Gy$ does not intersect the orbit $P_i.$ Therefore, for each $y$ in $Q_j,$ we have that there are fewer pairs $G(a,y) \lessdot G(b,y)$ than there are $G(b,y)\lessdot G(c,y).$ Hence, summing over all $Gy \in Q_j$ gives the proposition.
\end{proof}
\begin{prop}
there are more edges from $P_{i+1} \times Q_j$ to $P_{i+1} \times Q_{j+1}$ than there are from $P_i \times Q_j$ to $P_{i} \times Q_{j+1}.$
\end{prop}
\begin{proof}
We know that there is an order matching $P_i \rightarrow P_{i+1}.$ Hence, for each edge $P_{i+1} \times Q_j$ to $P_{i+1} \times Q_{j+1},$ which is of the form $G(t,x) \lessdot G(t,y),$ we obtain an edge from $P_i \times Q_j$ to $P_{i} \times Q_{j+1}$ of the from  $G(s,x) \lessdot G(s,y),$ where $s$ is the image of $t$ under the order matching. Hence, there are more edges  from $P_{i+1} \times Q_j$ to $P_{i+1} \times Q_{j+1}$ than there are from $P_i \times Q_j$ to $P_{i} \times Q_{j+1}.$
\end{proof}

\end{document}